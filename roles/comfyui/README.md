# Ansible Role: comfyui

## Описание

Роль `comfyui` предназначена для автоматизированной установки и настройки ComfyUI — графического пользовательского интерфейса для работы с нейросетями и генеративным искусственным интеллектом. Роль обеспечивает развертывание ComfyUI на целевой Linux-системе с минимальными усилиями, управляя зависимостями, конфигурацией и запуском сервиса.

---

## Возможности роли

- Установка необходимых системных пакетов и зависимостей для ComfyUI
- Клонирование репозитория ComfyUI из Git (если предусмотрено)
- Настройка окружения и конфигурационных файлов
- Запуск и управление сервисом ComfyUI (например, через systemd)
- Обеспечение автоматического обновления и поддержки актуальной версии

---

## Требования

- Целевая система с Linux (поддерживаются основные дистрибутивы, например, Ubuntu, Debian, CentOS)
- Установленный Ansible версии 2.9 и выше
- Наличие доступа к интернету для загрузки пакетов и репозитория ComfyUI
- Пользователь с правами sudo для установки пакетов и управления сервисами

---

## Переменные роли

| Переменная | Описание | Значение по умолчанию |
| :-- | :-- | :-- |
| `comfyui_install_dir` | Каталог установки ComfyUI | `/opt/comfyui` |
| `comfyui_repo_url` | URL Git-репозитория ComfyUI | `https://github.com/comfyanonymous/ComfyUI.git` (пример) |
| `comfyui_version` | Версия или ветка ComfyUI для установки | `main` |
| `comfyui_service_enabled` | Включить автозапуск сервиса ComfyUI | `true` |
| `comfyui_service_state` | Статус сервиса (запущен/остановлен) | `started` |

*Примечание: конкретные переменные и значения нужно уточнить в файлах `defaults/main.yml` и `vars/main.yml` роли.*

---

## Использование

Пример простого плейбука для установки и запуска ComfyUI с использованием роли:

```yaml
---
- name: Установка и запуск ComfyUI
  hosts: all
  become: yes
  roles:
    - role: comfyui
      vars:
        comfyui_install_dir: /opt/comfyui
        comfyui_service_enabled: true
        comfyui_service_state: started
```


---

## Структура роли

- `tasks/main.yml` — основной файл с задачами установки и настройки
- `defaults/main.yml` — значения переменных по умолчанию
- `handlers/main.yml` — обработчики, например, перезапуск сервиса
- `files/` — статичные файлы, если есть
- `templates/` — шаблоны конфигурационных файлов
- `meta/main.yml` — метаданные роли и зависимости
- `tests/` — тестовые плейбуки и сценарии

---

## Зависимости

Роль может требовать установки дополнительных коллекций Ansible или ролей, например, для управления пакетами или сервисами. Уточняйте в `meta/main.yml`.

---

## Лицензия

Роль распространяется под лицензией MIT (уточните в репозитории).

---

## Контакты и поддержка

Для вопросов и предложений по роли обращайтесь в репозиторий GitHub: https://github.com/daowolf2000/ansible-collection-linux/issues
